require=function e(a,t,o){function n(r,c){if(!t[r]){if(!a[r]){var l="function"==typeof require&&require;if(!c&&l)return l(r,!0);if(i)return i(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var h=t[r]={exports:{}};a[r][0].call(h.exports,function(e){var t=a[r][1][e];return n(t||e)},h,h.exports,e,a,t,o)}return t[r].exports}for(var i="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({CharacterChoose:[function(e,a,t){"use strict";cc._RF.push(a,"4bfe4prQrBHjpR4ULycE2mF","CharacterChoose");var o=e("Database"),n=0,i=o.chars;cc.Class({extends:cc.Component,properties:{pic:cc.Sprite,chname:cc.RichText,chdesc:cc.RichText,count:cc.Label,bnext:cc.Button,blast:cc.Button,ok:cc.Button},refresh:function(e){var a=cc.sequence(cc.moveBy(.5,500*-e,0),cc.callFunc(function(){this.pic.spriteFrame=Global.resources[i[n].pic]},this),cc.moveBy(0,1e3*e,0),cc.moveBy(.5,500*-e,0));a.easing(cc.easeBackIn()),this.pic.node.runAction(a),this.chname.string=i[n].name,this.chdesc.string=i[n].desc+"\nInitial Bonus:\n";for(var t=0;t<i[n].init.length;t++)this.chdesc.string+=i[n].init[t][0]+" "+i[n].init[t][1]+"\n";this.count.string=n+1+"/"+i.length},start:function(){this.refresh();var e=this;console.log(o.chars.length),this.bnext.node.on("click",function(a){n=(n+1)%i.length,e.refresh(1)}),this.blast.node.on("click",function(a){n=(n+o.chars.length-1)%i.length,e.refresh(-1)}),this.ok.node.on("click",function(e){Global.to="GameScene",Global.pl=n;for(var a=0;a<i[n].init.length;a++)Global.attr[i[n].init[a][0]]+=i[n].init[a][1];cc.director.loadScene("Loading")})}}),cc._RF.pop()},{Database:"Database"}],Database:[function(e,a,t){"use strict";cc._RF.push(a,"648c1DnFidA1K3x/IzJQFMU","Database");var o=[{name:"Reimu Hakurei",desc:"The shrine maiden everyone knows.\n",init:[["faith",30],["human",30],["youkai",-50]],race:"human",pic:"reimu",proposal:[{name:"I am poor.\nGive me your donation.",affect:{yes:[["money",-20],["reimu",20],["youkai",-10],["faith",50]],no:[["reimu",-40]]}},{name:"Do you want to come for a drink?\nWe are having a party.",affect:{yes:[["reimu",20],["faith",10],["?",-50,50],["strength",-20]],no:[["reimu",-40]]}},{name:"Allow me to exterminate some stupid youkai",affect:{yes:[["reimu",120],["human",60],["faith",60],["youkai",-50]],no:[["reimu",-60],["human",-30],["youkai",70],["faith",60]]}}]},{name:"Marisa Kirisame",desc:"An ordinary magician.\n",race:"human",pic:"marisa",init:[["money",50],["faith",-10]],proposal:[{name:"I have a mysterious potion.\nDo you want to have a try?",affect:{yes:[["money",-10],["marisa",10],["?",-50,50]],no:[["marisa",-5]]}},{name:"I want to enlarge my shop.",affect:{yes:[["money",-30,50],["marisa",50],["faith",15],["environment",-5]],no:[["marisa",-5],["faith",-10]]}},{name:"I want to shoot down Reimu's shrine",affect:{yes:[["reimu",-50],["marisa",50],["money",-50]],no:[["marisa",-25]]}}]},{name:"Rumia",desc:"Youkai of the dark\n",race:"youkai",pic:"rumia",init:[["human",-25],["faith",-20],["youkai",20]],proposal:[{name:"I am hungry\nCan I eat some people of yours?",affect:{yes:[["human",-45],["faith",-20],["rumia",5]],no:[["rumia",-50]]}},{name:"Can I create a ball of dark matters?",affect:{yes:[["rumia",5],["human",-10],["faith",-5]],no:[["rumia",-25]]}},{name:"Is...Is that so?",affect:{yes:[["rumia",10],["knowledge",10]],no:[["rumia",10]]}}]},{name:"Cirno",desc:"Ice baka",race:"fairy",pic:"cirno",init:[["knowledge",-99]],proposal:[{name:"Freeze the frogs!",affect:{yes:[["cirno",5],["faith",-5],["environment",-10]],no:[["cirno",-40]]}},{name:"Fight!",affect:{yes:[["environment",-5],["fairy",-20],["faith",20],["strength",20]],no:[["cirno",-55],["fairy",10],["knowledge",20]]}},{name:"Open ice-cream shop?",affect:{yes:[["money",-5,15],["cirno",10],["?",0,5],["?",-5,0],["human",-5],["environment",-5],["strength",-5]],no:[["cirno",-20]]}},{name:"I want to freeze everything!!",affect:{yes:[["environment",-90],["cirno",110],["human",-90],["fairy",-90],["youkai",-90]],no:[["cirno",-20]]}}]},{name:"Hong meiling",desc:"Guard of the Devil Mansion",race:"human",pic:"meiling",init:[["strength",25]],proposal:[{name:"I want to sleep\nDon't tell my masters",affect:{yes:[["meiling",25],["sakuya",-25]],no:[["meiling",-25],["sakuya",25]]}},{name:"Practise kungfu with me?",affect:{yes:[["meiling",15],["faith",10],["strength",40]],no:[["faith",-5]]}}]},{name:"Patchouli Knowledge",desc:"The big library",race:"human",pic:"patchouli",init:[["strength",-50],["knowledge",50]],proposal:[{name:"I want to publish my book",affect:{yes:[["money",30],["knowledge",50],["patchouli",15],["environment",-20]],no:[["patchouli",-15],["knowledge",-20]]}},{name:"Let me teach you magic?",affect:{yes:[["knowledge",20],["strength",40],["?",-25,25]],no:[["patchouli",-25],["strength",-10],["knowledge",-10]]}},{name:"Please stop Marisa from stealing books",affect:{yes:[["patchouli",50],["marisa",-60]],no:[["marisa",60],["patchouli",-60]]}}]},{name:"Izayoi Sakuya",desc:"The maid with knife",race:"human",pic:"sakuya",init:[["strength",35],["marisa",10],["reimu",10],["remilia",60]],proposal:[{name:"Help me clean the mansion",affect:{yes:[["sakuya",15],["patchouli",15]],no:[["sakuya",-15],["patchouli",-15]]}},{name:"Let me teach you knifes?",affect:{yes:[["strength",20]],no:[["sakuya",-25]]}},{name:"Please stop Meiling from sleeping!",affect:{yes:[["meiling",-25],["sakuya",25]],no:[["meiling",25],["sakuya",-25]]}},{name:"Let's start a party with my master!",affect:{yes:[["money",-25],["sakuya",25],["remilia",25],["?",-25,25],["?",-25,25]],no:[["sakuya",-75],["remilia",-60]]}}]},{name:"Remilia Scarlet",desc:"The bright red moon",race:"vampire",pic:"remilia",init:[["sakuya",60],["strength",60]],proposal:[{name:"You should ban garlics",affect:{yes:[["remilia",15],["sakuya",5],["human",-30],["money",-30]],no:[["remilia",-25],["sakuya",-25]]}},{name:"We shall hide the sun",affect:{yes:[["environment",-100],["remilia",100],["sakuya",50],["human",-50],["reimu",-50]],no:[["remilia",-30],["sakuya",-10]]}},{name:"Do you agree I am the strongest?",affect:{yes:[["remilia",25],["knowledge",-5]],no:[["remilia",-25]]}},{name:"I am hungry. You know what you should do, right?",affect:{yes:[["strength",-30],["remilia",30]],no:[["remilia",-55]]}},{name:"Have some red tea with me?",affect:{yes:[["strength",5],["?",-5,5],["remilia",5],["sakuya",5]],no:[["remilia",-5]]}}]},{name:"Flandre Scarlet",desc:"The crazy sister",race:"vampire",pic:"flandre",init:[["strength",70],["remilia",55]],proposal:[{name:"P l a y  w i t h  m e ~",affect:{yes:[["flandre",50],["strength",-50]],no:[["flandre",-190]]}},{name:"L e t  m e  o u t ?",affect:{yes:[["remilia",-30],["human",-30],["flandre",50]],no:[["flandre",-95]]}}]}];a.exports={chars:o},cc._RF.pop()},{}],DieScene:[function(e,a,t){"use strict";cc._RF.push(a,"97c5aaV9KNJE4LOESg58za2","DieScene"),cc.Class({extends:cc.Component,properties:{txt:cc.RichText},start:function(){for(var e in Global.attr){if(Global.attr[e]<0){1==Global.type[e]?this.txt.string=e+" hates you and kills you.\n":2==Global.type[e]?this.txt.string=e+" hate you and kill you.\n":this.txt.string="You've run out of "+e+"\n";break}if(Global.attr[e]>=200){1==Global.type[e]?this.txt.string="People say you love "+e+" too much and is unfair\n":2==Global.type[e]?this.txt.string="People say you love "+e+" too much and is unfair\n":"money"==e?this.txt.string="People say you are too greedy\n":"environment"==e?this.txt.string="People say you care about environment too much and is making Gensokyo primitive\n":"faith"==e?this.txt.string="People doubt if you are yet another preacher\n":"strength"==e?this.txt.string="People are afraid you are too strong and will destroy their home\n":"knowledge"==e&&(this.txt.string="People say you know too much\n");break}}this.txt.string+="Close/Refresh to retry!"}}),cc._RF.pop()},{}],GameScene:[function(e,a,t){"use strict";cc._RF.push(a,"0ba60FvogVNJpwbpbrBL61A","GameScene");var o=e("Database").chars,n=0;cc.Class({extends:cc.Component,properties:{bstat:cc.Button,bspecies:cc.Button,bperson:cc.Button,speaker:cc.RichText,request:cc.RichText,byes:cc.Button,bno:cc.Button,img:cc.Sprite,info:cc.RichText},getNewRequest:function(){for(var e in Global.attr)(Global.attr[e]<=0||Global.attr[e]>=200)&&(Global.to="LoseScene",cc.director.loadScene("Loading"));n++;for(var a=[],e=0;e<o.length;e++)if(e!=Global.pl)for(var t=o[e].proposal,i=0;i<t.length;i++)[e,i]in Global.used||a.push([e,i]);if(0==a.length)Global.to="WinScene",cc.director.loadScene("Loading");else{var r=Math.floor(Math.random()*a.length);Global.now=a[r],Global.used[a[r]]=!0,this.refresh()}},calcText:function(e){for(var a="",t=0;t<e.length;t++)if(e[t].length>2)a+=1==(o=Global.type[e[t][0]])?"\n<color=#0000ff>Relationship with "+e[t][0]+" will change</color>":2==o?"\n<color=#0000ff>Relationship with "+e[t][0]+" will change</color>":3==o?"\n<color=#0000ff>"+e[t][0]+" will change</color>":"\n<color=#0000ff>Something will change</color>";else if(e[t][1]>0)a+=1==(o=Global.type[e[t][0]])?"\n<color=#00ff00>Relationship with "+e[t][0]+" will be better</color>":2==o?"\n<color=#00ff00>Relationship with "+e[t][0]+" will be better</color>":3==o?"\n<color=#00ff00>Will earn "+e[t][0]+"</color>":"\n<color=#00ff00>Something will be better</color>";else{var o=Global.type[e[t][0]];a+=1==o?"\n<color=#ff0000>Relationship with "+e[t][0]+" will be worse</color>":2==o?"\n<color=#ff0000>Relationship with "+e[t][0]+" will be worse</color>":3==o?"\n<color=#ff0000>Will lose "+e[t][0]+"</color>":"\n<color=#ff0000>Something will be worse</color>"}return a},refresh:function(){var e=Global.now;this.img.spriteFrame=Global.resources[o[e[0]].pic],this.speaker.string="#"+n+":"+o[e[0]].name;var a=o[e[0]].proposal[e[1]].name+"\nIf YES:";a+=this.calcText(o[e[0]].proposal[e[1]].affect.yes),a+="\nIf NO:",a+=this.calcText(o[e[0]].proposal[e[1]].affect.no),this.request.string=a,this.info.string=Global.info},affect:function(e){for(var a="",t=0;t<e.length;t++){var o,n;if("?"==e[t][0]){var i=[];for(var r in Global.attr)i.push(r);o=i[Math.floor(Math.random()*i.length)]}else o=e[t][0];n=e[t].length>2?Math.floor(Math.random()*(e[t][2]-e[t][1])+e[t][1]):e[t][1],Global.attr[o]+=n,a+=n>0?o+"+"+n+"|":o+""+n+"|"}Global.info=this.info.string=a},start:function(){null==Global.now?this.getNewRequest():this.refresh(),this.bstat.node.on("click",function(e){Global.to="StatScene",Global.view=3,cc.director.loadScene("Loading")}),this.bspecies.node.on("click",function(e){Global.to="StatScene",Global.view=2,cc.director.loadScene("Loading")}),this.bperson.node.on("click",function(e){Global.to="StatScene",Global.view=1,cc.director.loadScene("Loading")});var e=this;this.byes.node.on("click",function(a){e.affect(o[Global.now[0]].proposal[Global.now[1]].affect.yes),e.getNewRequest()}),this.bno.node.on("click",function(a){e.affect(o[Global.now[0]].proposal[Global.now[1]].affect.no),e.getNewRequest()})}}),cc._RF.pop()},{Database:"Database"}],LoadingScene:[function(e,a,t){"use strict";cc._RF.push(a,"cf964KcAkJGPrslf6J7/zKP","LoadingScene"),window.Global={to:"StartScene",resources:null,pl:0,attr:null,now:null,used:{},type:{},view:0,info:"Please Press YES or NO"};var o=e("Database").chars;cc.Class({extends:cc.Component,properties:{},start:function(){if(null==Global.attr){console.log("Initalizing Global.attr"),Global.attr={};for(var e=["money","environment","faith","strength","knowledge"],a=0;a<e.length;a++)Global.attr[e[a]]=100,Global.type[e[a]]=3;for(a=0;a<o.length;a++)Global.attr[o[a].pic]=100,Global.attr[o[a].race]=100,Global.type[o[a].race]=2,Global.type[o[a].pic]=1}null==Global.resources?(console.log("Loading resources"),Global.resources={},cc.loader.loadResDir("char",cc.SpriteFrame,function(e,a){for(var t=0;t<a.length;t++)console.log(a[t].name),Global.resources[a[t].name]=a[t];cc.director.loadScene(Global.to)})):cc.director.loadScene(Global.to)}}),cc._RF.pop()},{Database:"Database"}],StartScene:[function(e,a,t){"use strict";cc._RF.push(a,"75b4bNFNRBIxKjN5I2Wuf6x","StartScene"),cc.Class({extends:cc.Component,properties:{st:cc.Button,music:cc.AudioClip},start:function(){this.st.node.on("click",function(e){Global.to="CharacterChoose",console.log(Global.to),cc.director.loadScene("Loading")}),cc.audioEngine.play(this.music,!0,1)}}),cc._RF.pop()},{}],StatScene:[function(e,a,t){"use strict";cc._RF.push(a,"e8dfc/JM+9MJq+iSOqzzltn","StatScene");var o=e("Database").chars;cc.Class({extends:cc.Component,properties:{bg:cc.Sprite,txt:cc.RichText,back:cc.Button},start:function(){this.bg.spriteFrame=Global.resources[o[Global.pl].pic],this.back.node.on("click",function(e){Global.to="GameScene",cc.director.loadScene("Loading")});var e="";for(var a in Global.attr)if(Global.type[a]==Global.view){e+="\n";var t=Global.attr[a];e+=t>=100?"<color=#00ff00>"+t+"</color>":t>=50?"<color=#ffff00>"+t+"</color>":t>=25?"<color=#990000>"+t+"</color>":"<color=#ff0000>"+t+"</color>",e+="="+a}this.txt.string=e}}),cc._RF.pop()},{Database:"Database"}]},{},["CharacterChoose","Database","DieScene","GameScene","LoadingScene","StartScene","StatScene"]);